<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#fff0f6" />
  <title>A Poem</title>
  <link rel="stylesheet" href="style.css" />
</head>
  <script>
  (function () {
    const audio = document.getElementById("ourAudio");
    if (!audio) return;

    // Restore time + play state
    const savedTime = Number(localStorage.getItem("ourSong_time") || "0");
    const shouldPlay = localStorage.getItem("ourSong_playing") === "1";

    // Safari can be picky about setting currentTime before metadata loads
    audio.addEventListener("loadedmetadata", () => {
      if (!Number.isNaN(savedTime) && savedTime > 0 && savedTime < audio.duration) {
        audio.currentTime = savedTime;
      }
      if (shouldPlay) {
        audio.play().catch(() => {
          // Autoplay may be blocked until user interacts
        });
      }
    });

    // Save time periodically
    const saveTime = () => localStorage.setItem("ourSong_time", String(audio.currentTime || 0));
    audio.addEventListener("timeupdate", saveTime);
    window.addEventListener("beforeunload", saveTime);

    // Save play/pause state
    audio.addEventListener("play", () => localStorage.setItem("ourSong_playing", "1"));
    audio.addEventListener("pause", () => localStorage.setItem("ourSong_playing", "0"));
  })();
</script>

<body>
  <div id="musicBar" style="position:sticky;top:0;z-index:10000;padding:10px 0;">
  <div class="card" style="padding:14px 16px;">
    <div class="center">
      <h2 style="font-size:28px;margin:0 0 6px;">Our song ğŸ¶</h2>
      <audio id="ourAudio" controls preload="auto" style="width:min(520px,100%);">
        <source src="audio/oursong.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <p class="small" style="margin-top:8px;">Press play once â€” itâ€™ll keep going as you click Next ğŸ’—</p>
    </div>
  </div>
</div>

  <div class="hearts" aria-hidden="true">
  <span>ğŸ’—</span><span>ğŸ’–</span><span>ğŸ’˜</span><span>ğŸ’</span><span>ğŸ’•</span>
  <span>ğŸ’—</span><span>ğŸ’–</span><span>ğŸ’˜</span><span>ğŸ’</span><span>ğŸ’•</span>
  <span>ğŸ’—</span><span>ğŸ’–</span><span>ğŸ’˜</span><span>ğŸ’</span><span>ğŸ’•</span>
  </div>

  <main class="card">
    <div class="center">
      <h1>A little poem ğŸ’Œ</h1>
      <p>(written by me, for you)</p>
    </div>

    <hr />

    <p>
      <strong>Haley,</strong><br><br>
    
      Two months in and somehow you've shown me a kind of loveI didnâ€™t even know I was missing.<br><br>
    
      You make the ordinary feel lucky, like mornings are better just because youâ€™re there, like being myself is finally enough.<br><br>
    
      When I took you home to LA and Luna chose <em>you</em> over me, I knew I was done for. Sheâ€™s never trusted anyone like that waking you up with kisses every morning, claiming you like you were always meant to be there.<br><br>
    
      I think thatâ€™s how I feel too. Like somehow, in the middle of everything, I found something real.<br><br>
    
      And if love is learning, then Iâ€™m happy learning you.
    </p>


    <div class="nav">
      <a class="btn btn-soft" href="yes.html">Back</a>
      <a class="btn btn-primary" href="song.html">Next âœ</a>
    </div>
  </main>
</body>
</html>
